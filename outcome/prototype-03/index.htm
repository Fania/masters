<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>

<title>Prototype 03 : Fania</title>

<link rel='shortcut icon' href='../../fonts/favicon.png' />

<link rel='stylesheet' href='../../ndxz-studio/site/sample/style.css' type='text/css' />
<!--[if lte IE 6]>
<link rel='stylesheet' href='http://www.fania.eu/ndxz-studio/site/sample/ie.css' type='text/css' />
<![endif]-->

<style type='text/css'>
.grow { float:left; margin-bottom: 18px; }
	.thumb {  padding:0; text-align:left; display: table; height: 220px; #position: relative; overflow: hidden; width: 220px; }

	.grow strong { margin-top: 3px; text-align: left; display: block; font-weight: normal; text-align: center; }
	.grow em { font-style: normal; display: none; text-align: center; }
	
	.thumb-it { #position: absolute; _top: 50%; display: table-cell; vertical-align: middle; text-align: center; }
	.thumb-img { #position: relative; width: 220px; display:block; }
</style>

<script type='text/javascript' src='../../ndxz-studio/site/js/jquery.js'></script>
<script type='text/javascript' src='../../ndxz-studio/site/js/cookie.js'></script>
<script type='text/javascript' src='../../ndxz-studio/site/js/expandingMenus.js'></script>
<!--<script type="text/javascript" src="http://www.fania.eu/ndxz-studio/site/js/fadeLinks.js"></script>-->
<script type='text/javascript' src='../../ndxz-studio/site/js/grow.vaska.js'></script>

<script type='text/javascript'>
path = '../../files/gimgs/index.htm';

$(document).ready(function()
{
	setTimeout('move_up()', 1);
	fixMenu(0);
	expandingMenu(1);
	fixMenu(2);
	expandingMenu(3); 
	fixMenu(4); 
	expandingMenu(5); 
	expandingMenu(6); 
	expandingMenu(7); 
	expandingMenu(8);
	fixMenu(9); 
	fixMenu(10);
});
</script>


</head>

<body class='section-10'>
<div id='menu'>
<div class='container'>

<p><a href="../../index.htm"><img class="logo" src="../../fonts/trans.gif" width="1" height="1" /></a></p>
<ul>
<li><a href='../../description/project-description/index.htm' onclick="do_click();">Description</a></li>
</ul>

<ul>
<li class='section-title'>Inspirations</li>
<li><a href='../../inspirations/project-inspirations/index.htm' onclick="do_click();">Favorites</a></li>
<li><a href='../../inspirations/openframeworks/index.htm' onclick="do_click();">OpenFrameworks</a></li>
<li><a href='../../inspirations/past-big-screen-installations/index.htm' onclick="do_click();">Past BBC Events</a></li>
<li><a href='../../inspirations/others/index.htm' onclick="do_click();">Others</a></li>
</ul>

<ul>
<li><a href='../../projectbrain/index.htm' onclick="do_click();">Project Brain</a></li>
</ul>

<ul>
<li class='section-title'>Research</li>
<li><a href='../../research/project-research/index.htm' onclick="do_click();">Books</a></li>
<li><a href='../../research/bbc/index.htm' onclick="do_click();">BBC</a></li>
<li><a href='../../research/technical/index.htm' onclick="do_click();">Technical</a></li>
</ul>

<ul>
<li><a href='../../requirements/project-requirements/index.htm' onclick="do_click();">Requirements</a></li>
</ul>

<ul>
<li class='section-title'>Development</li>
<li><a href='../../development/project-development/index.htm' onclick="do_click();">Prototype 01</a></li>
<li><a href='../../development/prototype-02/index.htm' onclick="do_click();">Prototype 02</a></li>
</ul>

<ul>
<li class='section-title'>Outcome</li>
<li><a href='../project-outcome/index.htm' onclick="do_click();">Summary</a></li>
<li class='active'><a href='index.htm' onclick="do_click();">Prototype 03</a></li>
<li><a href='../completed-brain/index.htm' onclick="do_click();">My Brain</a></li>
</ul>

<ul>
<li class='section-title'>Further Development</li>
<li><a href='../../further/further-development/index.htm' onclick="do_click();">Technical</a></li>
<li><a href='../../further/bbc-submission/index.htm' onclick="do_click();">BBC Submission</a></li>
</ul>

<ul>
<li class='section-title'>Critical Commentary</li>
<li><a href='../../critical/critical-commentary/index.htm' onclick="do_click();">Initial Thoughts</a></li>
<li><a href='../../critical/tron-inspiration/index.htm' onclick="do_click();">Tron Inspiration</a></li>
<li><a href='../../critical/problems-encountered/index.htm' onclick="do_click();">Problems Encountered</a></li>
<li><a href='../../critical/afterthoughts/index.htm' onclick="do_click();">Afterthoughts</a></li>
</ul>

<ul>
<li><a href='../../references/references/index.htm' onclick="do_click();">References</a></li>
</ul>

<ul>
<li><a href='../../about/index.htm' onclick="do_click();">About</a></li>
</ul>




<!-- you must provide a link to Indexhibit on your site someplace - thank you -->
<!--
<ul>
<li>Built with <a href='http://www.indexhibit.org/'>Indexhibit</a></li>
</ul>
-->

</div>	
</div>	

<div id='content'>
<div class='container'>

<!-- text and image -->
<p>Even though this is the version of my project that I will submit for the Masters, this is by no means the final version of my project’s application. For the submission to the BBC, I will do some more changes and optimisations. I’ll discuss this in details in the “Further Development” section.</p>

<p><br />
</p>

<p><iframe src="http://player.vimeo.com/video/14934181?title=0&#38;byline=0&#38;portrait=0&#38;color=F23D70" width="580" height="464" frameborder="0"></iframe></p>

<p><br />
</p>

<p>All videos of my prototypes can be found at my vimeo page <a href="../../../www.vimeo.com/fania/index.htm">here</a>.</p>

<p><br />
</p>

<p>Below are the source files of prototype 03 written in pseudo code for easier understanding.</p>

<p><br />
</p>

<p>main.cpp
<pre>
include stuff</p>

<p>// Main<br />
//--------------------------------------------------------------<br />
open window of size 720,576<br />
run main c++ file (testApp.cpp)<br />
</pre></p>

<p><br />
</p>

<p>testApp.h
<pre>
Include addons like ofxOpenCv, ofxVectorMath, ofxBox2d, ofxContourUtil and ofxBlobTracker</p>

<p>name the blob tracker for the history of contours and blobs<br />
name the physics world<br />
name the happy face circle</p>

<p>name video grabber for the webcam or video player for movie</p>

<p>name colour images to store the video pixels in<br />
name grayscale images to store the foreground and background pixels in</p>

<p>name contour finders to store the contours in</p>

<p>name variables for blur, threshold and video sizes <br />
</pre></p>

<p><br />
</p>

<p>testApp.cpp
<pre>
// Setup
//--------------------------------------------------------------
Make background black</p>

<p>Setup the physics world</p>

<p>Create happy face </p>

<p>Set dimensions of video<br />
Set dimensions of video on which operations are performed</p>

<p>Set the blob tracker to work within our physics world so blobs and the happy face can interact</p>

<p>Setup video (or live feed)</p>

<p>Allocate memory for video and operations video (which is going to be smaller than the original<br />
 to improve performance)</p>

<p>Setup Gaussian mixture model and allocate memory for its drawing</p>

<p>Initialise blur and threshold</p>

<p>// Update<br />
//--------------------------------------------------------------<br />
For each new frame of the video (or live feed) we do:</p>

<p>Print frames per second, blur and threshold values into the window title bar</p>

<p>Scale video to our operations size<br />
Update gaussian mixture model to learn background and save it in our foreground video<br />
We apply our blur and threshold to the foreground video</p>

<p>Generate contours<br />
We track the generated blobs</p>

<p>Draw<br />
//--------------------------------------------------------------<br />
Draw original video in original size</p>

<p>Draw blob history:<br />
Draw the filled contour from 20 frames ago in half transparent white<br />
Draw the outline of the last 20 frames’ contours. Adjust transparency slightly to let the final<br />
 contour appear the clearest and the earliest almost invisible.</p>

<p>Add the current contour of each blob to a linestrip in the physics world</p>

<p>Draw our happy face with a random colour in each frame</p>

<p>Happy Face Draw<br />
//--------------------------------------------------------------<br />
Draw the main filled circle of the face<br />
Draw the outline of the face<br />
Draw the filled white circles for the right and left eye<br />
Draw the black outline of the eyes<br />
Draw the pupils<br />
</pre></p>
<div class='cl'><!-- --></div>

<!-- end text and image -->

</div>
</div>

</body>
</html>