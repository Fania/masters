<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>

<title>Problems Encountered : Fania</title>

<link rel='shortcut icon' href='../../fonts/favicon.png' />

<link rel='stylesheet' href='../../ndxz-studio/site/sample/style.css' type='text/css' />
<!--[if lte IE 6]>
<link rel='stylesheet' href='http://www.fania.eu/ndxz-studio/site/sample/ie.css' type='text/css' />
<![endif]-->

<style type='text/css'>
.grow { float:left; margin-bottom: 18px; }
	.thumb {  padding:0; text-align:left; display: table; height: 220px; #position: relative; overflow: hidden; width: 220px; }

	.grow strong { margin-top: 3px; text-align: left; display: block; font-weight: normal; text-align: center; }
	.grow em { font-style: normal; display: none; text-align: center; }
	
	.thumb-it { #position: absolute; _top: 50%; display: table-cell; vertical-align: middle; text-align: center; }
	.thumb-img { #position: relative; width: 220px; display:block; }
</style>

<script type='text/javascript' src='../../ndxz-studio/site/js/jquery.js'></script>
<script type='text/javascript' src='../../ndxz-studio/site/js/cookie.js'></script>
<script type='text/javascript' src='../../ndxz-studio/site/js/expandingMenus.js'></script>
<!--<script type="text/javascript" src="http://www.fania.eu/ndxz-studio/site/js/fadeLinks.js"></script>-->
<script type='text/javascript' src='../../ndxz-studio/site/js/grow.vaska.js'></script>

<script type='text/javascript'>
path = '../../files/gimgs/index.htm';

$(document).ready(function()
{
	setTimeout('move_up()', 1);
	fixMenu(0);
	expandingMenu(1);
	fixMenu(2);
	expandingMenu(3); 
	fixMenu(4); 
	expandingMenu(5); 
	expandingMenu(6); 
	expandingMenu(7); 
	expandingMenu(8);
	fixMenu(9); 
	fixMenu(10);
});
</script>


</head>

<body class='section-12'>
<div id='menu'>
<div class='container'>

<p><a href="../../index.htm"><img class="logo" src="../../fonts/trans.gif" width="1" height="1" /></a></p>
<ul>
<li><a href='../../description/project-description/index.htm' onclick="do_click();">Description</a></li>
</ul>

<ul>
<li class='section-title'>Inspirations</li>
<li><a href='../../inspirations/project-inspirations/index.htm' onclick="do_click();">Favorites</a></li>
<li><a href='../../inspirations/openframeworks/index.htm' onclick="do_click();">OpenFrameworks</a></li>
<li><a href='../../inspirations/past-big-screen-installations/index.htm' onclick="do_click();">Past BBC Events</a></li>
<li><a href='../../inspirations/others/index.htm' onclick="do_click();">Others</a></li>
</ul>

<ul>
<li><a href='../../projectbrain/index.htm' onclick="do_click();">Project Brain</a></li>
</ul>

<ul>
<li class='section-title'>Research</li>
<li><a href='../../research/project-research/index.htm' onclick="do_click();">Books</a></li>
<li><a href='../../research/bbc/index.htm' onclick="do_click();">BBC</a></li>
<li><a href='../../research/technical/index.htm' onclick="do_click();">Technical</a></li>
</ul>

<ul>
<li><a href='../../requirements/project-requirements/index.htm' onclick="do_click();">Requirements</a></li>
</ul>

<ul>
<li class='section-title'>Development</li>
<li><a href='../../development/project-development/index.htm' onclick="do_click();">Prototype 01</a></li>
<li><a href='../../development/prototype-02/index.htm' onclick="do_click();">Prototype 02</a></li>
</ul>

<ul>
<li class='section-title'>Outcome</li>
<li><a href='../../outcome/project-outcome/index.htm' onclick="do_click();">Summary</a></li>
<li><a href='../../outcome/prototype-03/index.htm' onclick="do_click();">Prototype 03</a></li>
<li><a href='../../outcome/completed-brain/index.htm' onclick="do_click();">My Brain</a></li>
</ul>

<ul>
<li class='section-title'>Further Development</li>
<li><a href='../../further/further-development/index.htm' onclick="do_click();">Technical</a></li>
<li><a href='../../further/bbc-submission/index.htm' onclick="do_click();">BBC Submission</a></li>
</ul>

<ul>
<li class='section-title'>Critical Commentary</li>
<li><a href='../critical-commentary/index.htm' onclick="do_click();">Initial Thoughts</a></li>
<li><a href='../tron-inspiration/index.htm' onclick="do_click();">Tron Inspiration</a></li>
<li class='active'><a href='index.htm' onclick="do_click();">Problems Encountered</a></li>
<li><a href='../afterthoughts/index.htm' onclick="do_click();">Afterthoughts</a></li>
</ul>

<ul>
<li><a href='../../references/references/index.htm' onclick="do_click();">References</a></li>
</ul>

<ul>
<li><a href='../../about/index.htm' onclick="do_click();">About</a></li>
</ul>




<!-- you must provide a link to Indexhibit on your site someplace - thank you -->
<!--
<ul>
<li>Built with <a href='http://www.indexhibit.org/'>Indexhibit</a></li>
</ul>
-->

</div>	
</div>	

<div id='content'>
<div class='container'>

<!-- text and image -->
<p><strong><br />
Language and IDE</strong><br />
Finding the right programming language was harder than I thought. Java, C, C++, Flash, Max/Jitter or something else all together… There were a lot of choices and I had to consider pros and cons of each of them. Max/Jitter immediately failed my test, as it wasn’t a free language to use. Flash was something I used during my first semester and didn’t feel like doing the same thing again. Java I had done extensively during my first degree, so I immediately felt more drawn to C++ or C which I only knew a little. The next problem to think of was the IDE (Integrated Development Environment). It had to work with the language of my choice and be free to use because I like Open Source :). Before I knew it though, I had found openFrameworks and that recommended Code::Blocks as an IDE. I liked both from the start and decided to use them for my project.</p>

<p><strong><br />
Addons</strong><br />
Fairly soon after I started coding I realised that I needed a lot of addons and there was a big choice of them out there. The forums of the openFrameworks community are very vivid and it was hard to get hold of the newest version of an addon. Eventually I found some of the developer’s SVN addresses and had access to their up-to-date code. I played with a lot of different addons but ended up with only a few essential ones. I obviously needed one to integrate OpenCv into my project, so ofxOpenCv was an obvious choice. I also added ofxContourUtil which added some more functionality to my contours and ofxBobTracker to add my blob histories. I did have to rewrite some of that code though, just to add some custom functionality like being able to have random colours for each blob. I also picked ofxVectorMath and ofxBox2d for the collision and made a few custom changes.</p>

<p><strong><br />
Blob Detection</strong><br />
During my actual coding I came across several major problems, the first one being my motion tracking setup. At first I didn’t have any automatic background subtraction but had to manually set the background and then look at the difference of that frame to the new one, to recognise any motion in the video. Finding a function that allowed automatic background subtraction was crucial for my project to run nicely, as the application for the BBC Big Screen obviously had to run unsupervised too. I did find the Gaussian mixture model to help me do that. Given a few parameters it would work well enough on subtracting the background with a good and adjustable learning rate. Finding the right threshold was quite hard at first, I couldn’t quite get it to work smoothly but by adding a blur to the foreground image it generated, I could get reasonable results with my blob detection.</p>

<p><strong><br />
Contours in physics world</strong><br />
I then concentrated for quite some time on getting the contours to work as a linestrip within my physics world, so that they could collide with the little floating balls. I managed to get it work reasonable well, even though it was very slow.</p>

<p><strong><br />
Centroids</strong><br />
The issue with the linestrips of centroids was that the centroid of a blob would change location when the blob merges with another one. In order to get that working properly, I would need to change the behaviour of blobs merging. Or rather stop them from merging altogether. That is easier said than done, so it's on my list of to-do things.</p>

<p><strong><br />
Performance</strong><br />
My biggest problem overall though must have been the performance issue. I used to write and test my code on fairly small videos with just 320x240 size. As soon as I increased that size to 720x576 (the resolution required for the BBC Big Screen), then my performance would drop to being unacceptable. My frame rate went down to about 2 frames per second! I had to play with my code again and again and make little changes here and there to reduce the calculation time for the computer and make the code run faster. I changed the parameters for my contour finder for example. I narrowed down the range of blob sizes to detect and also changed the amount of blur. I also decreased the size of the actual video frame that my algorithm was looking at and then increased it back afterwards. This process would naturally decrease the amount of points I could get in my contours but got rid of the need of simplifying them to begin with. I still think the performance is not really acceptable and needs to be improved a lot but that’s for my further development now.</p>
<div class='cl'><!-- --></div>

<!-- end text and image -->

</div>
</div>

</body>
</html>